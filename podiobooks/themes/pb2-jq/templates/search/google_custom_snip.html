{% extends "base.html" %}
{% block body_class %}search-results{% endblock %}
{% block content %}
    <style>
        .gsc-control-cse, .gsc-wrapper, .gsc-results, .gsc-result, .gsc-webResult, .gsc-imageResult, .gsc-webResult.gsc-result, .gsc-results .gsc-imageResult {
            background: transparent;
            border: none;
        }

        .cse .gsc-webResult.gsc-result:hover,
        .gsc-webResult.gsc-result:hover,
        .gsc-webResult.gsc-result.gsc-promotion:hover,
        .gsc-results .gsc-imageResult-classic:hover,
        .gsc-results .gsc-imageResult-column:hover {
            border: none;
        }

    </style>

    <div style="display:none">
        <div id="pb_thumbnail">
            <div class="gs-image-box gs-web-image-box gs-web-image-box-portrait" data-vars="{thumbUrl:function() { return Vars.book ? book.image : cseThumbnail.src; }}">
                <td class="gsc-table-cell-thumbnail gsc-thumbnail">
                    <a class="gs-image"
                       data-attr="{href:url, target:target}">
                        <img class="gs-image"
                             onload="if (this.parentNode && this.parentNode.parentNode && this.parentNode.parentNode.parentNode) { this.parentNode.parentNode.parentNode.style.display = ''; this.parentNode.parentNode.className = 'gs-image-box gs-web-image-box gs-web-image-box-portrait'; } "
                             data-attr="{src:thumbUrl()}"
                                >
                    </a>
                </td>
            </div>
        </div>

        <div id="pb_webResult">
            <div class="gs-webResult gs-result"
                 data-vars="{longUrl:function() {
        var i = unescapedUrl.indexOf(visibleUrl);
        return i < 1 ? visibleUrl : unescapedUrl.substring(i);}}">
                <div data-if="Vars.richSnippet" data-attr="0"
                     data-body="render('thumbnail',richSnippet,{url:unescapedUrl,target:target})"></div>
                <div class="gs-title">
                    <a class="gs-title" data-attr="{href:unescapedUrl,target:target}"
                       data-body="html(title)"></a>
                </div>
                <div class="gs-snippet" data-body="html(content)"></div>

                <div class="gs-visibleUrl gs-visibleUrl-short" data-body="visibleUrl"></div>
                <div class="gs-visibleUrl gs-visibleUrl-long" data-body="longUrl()"></div>
                <div data-if="Vars.richSnippet && Vars.richSnippet.action" class="gs-actions"
                     data-body="render('action',richSnippet,{url:unescapedUrl,target:target})"></div>
            </div>
        </div>
    </div>

    <!-- Div container for the search box.-->
    <div class="cse-container" id="cse"></div>
    
{% endblock %}

{% block extra_foot %}
    <!-- 
        Use V2 of searach API 
        https://developers.google.com/custom-search/docs/element#cse-element
        https://developers.google.com/custom-search/docs/element#supported_attributes
    -->
    <script type="text/javascript">
        $(function(){
            google.setOnLoadCallback(function () {     
                google.search.Csedr.addOverride("pb_");
                google.search.cse.element.render({
                    div: "cse",
                    tag: 'search',
                    resultsUrl: '/search/snip/',
                    webSearchResultSetSize: 20,
                    webSearchSafesearch: "active"

                });
            });
        });
    </script>

    
    
{% endblock %}