<html>
    <head>
        <title>Hello, Ajax world!</title>
		<script type="text/javascript">
			//This block is used to be able to bootstrap in the CDN and local stuff side by side
			//It has to load before the call to the dojo js
	        djConfig={
	          parseOnLoad: true,
	          isDebug: true,
	          baseUrl: "/",
	          modulePaths: { pbwidgets: "media/js/pbwidgets" }
	        };
    	</script>
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.3/dijit/themes/tundra/tundra.css">
       	<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.3/dojox/form/resources/Rating.css">
	    <style type="text/css">
       	 	@import "/media/js/pbwidgets/book_desc/BookDesc.css";
    	</style>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.3/dojo/dojo.xd.js" djConfig="parseOnLoad: true">
        </script>
        <script type="text/javascript">
            function hello(){
                dojo.xhrGet({
                    // The following URL must match that used to test the server.
                    url: "/content/title/json/353",
                    handleAs: "json",
              
                    timeout: 5000, // Time in milliseconds
                    // The LOAD function will be called on a successful response.
                    load: function(response, ioArgs){
                        console.dir(response);
                        dojo.byId("cargo").innerHTML = response[0].fields.description;
                        return response;
                    },
                    
                    // The ERROR function will be called in an error case.
                    error: function(response, ioArgs){
                        console.error("HTTP status code: ", ioArgs.xhr.status);
                        return response;
                    }
                });
            }
            
            dojo.require("dijit.Tooltip");
       		dojo.require("pbwidgets.book_desc.BookDesc");
       		dojo.require("dojo.parser");
//            dojo.addOnLoad(function(){
//                new dijit.Tooltip({
//                    connectId: ["title1"],
//                    label: "Here is the text for title 1!"
//                });
//            });
        </script>
    </head>
    <body class="tundra">
        <div id="cargo" style="font-size: big">
        </div>
        <div id="booklist">
            <ul>
                <li id="title1">
                    <a href="">This is the title of the book</a>
                </li>
                <div dojoType="dijit.Tooltip" connectId="title1" position="below" id="topTip">
                    a<i>disposition</i>
                    to bear injuries patiently :<b>forbearance</b>
                </div>
            </ul>
        </div>
		Hello! This is the <span dojoType="pbwidgets.book_desc.BookDesc" titleId="99">title</span> of the book
		<br />
		There should be stars here:
		<script type="text/javascript">
		  dojo.require("dojox.form.Rating");
		</script>
		<div dojoType="dojox.form.Rating" numStars="5" value="3.5"></div>
    </body>
</html>
